2+2
39+285+67.28+30+107
(7+6+16+5+4)/2
(5.99+3.49+6.99+15.59+4.99)/2
(275 *6)/2
(300*6)/2
62137.50-27984.75
14000+12000+3000
34152.75 - 29000
2620+2620
2620*2
(80/100)/(1- 80/100)
20+120+360
a.	install.packages(“R2jags”)
install.packages(“R2jags”)
install.packages("R2jags")
install.packages("coda")
install.packages("rjags")
39.33+26.22+26.22
140000+3000+12000
14000+3000+12000
34153-29000
2373.00+2620.00
285+137.36+80+39+47.40-110.87
7551.00+14000.00+9438.50+3000.00+12000.00+9713.00+150.00+564.00+5721.00
7551.00+564.00+700.50+5721.00+564.00+728.25+5721.00
7551.00+564.00+700.50+5721.00+564.00+728.25+5721.00+150.00+564.00+5721.00
62137.50-27984.75
34152.75 - 29000
728.25+5152.75
62137.50 - $27984.75
62137.50 - 27984.75
34152.75 - 29,000
34152.75 - 29000
2373.00+2620
5152.75 - 4993
2373+80+2620+80
20+120+360
180+150+70
20/1000 * 1000
120/3000*10000
120/3000*1000
360/6000*1000
180/6000*1000
150/3000*1000
70/1000*1000
60+120+24-
60+120+240
90+150+280
19.18+39+15.99+13.40+38.25+51.34+16.92+83.12+12.01+100.85
(200/300)-(140/260)
(200/300)-(140/260)
(250/340)-(200/380)
(450/640)-(340/640)
200+60+140+120
250+90+200+180
Xunder35 <- (200*(140+120) - 140*(200+60))/520
Xover35 <- (250*(200+180) - 200*(250+90))/720
X < - Xunder35 + Xover35
X <- Xunder35 + Xover35
Yunder35 <- ((200+60)*(140+120))/520
Yover35 <- ((250+90)*(200+180))/720
Y <- Yunder35 + Yover35
X/Y
(43/50+49/50+48.5/50)
(43/50+49/50+48.5/50)/3
(50*80)/(20*50)
.96*50
.7*20
(48*86)/(52*14)
1.55+.66+2.29+0.79+6.99+0+4.29+0+6.98+3.99+2.69+5.98
1.55+.66+2.29+0.79+6.99+6.99+4.29+3.99+6.98+3.99+2.69+5.98
1.55+.66+2.29+0.79+6.99+6.99+2.29+3.99+6.98+3.99+2.69+5.98
+5
45.19+5
420*1580
420+1580
210+1750
420+210
1580+1750
(420*1750)/(1580*210)
120+1330
110+1230
120+110
1330+1230
(120*1230)/(1330*110)
300+250
100+520
250+520
(300*520)/(250*100)
(30*52)/(25*10)
12.17-12.17+26.47+3.65+34.32+21.77+46.19-9.98+37+272.03+5-21.77+17.47-3.64-19.50+79.74+12+10.10
120+1330+110+1230
230+2560
1450+1340
300+250+100+520
550+620
400+770
((120*1230/2790)+(300*520/1170))
Num <-  ((120*1230/2790)+(300*520/1170))
((1330*110/2790)+(250*100/1170))
Denom <- ((1330*110/2790)+(250*100/1170))
Num/Denom
((120*1230/2790)+(300*520/1170))/((1330*110/2790)+(250*100/1170))
ln(1.68)
log(1.68)
log(2.523367)
log(Num/Denom)
log(1.009)
log((120*1230)/(1330*110))
(120*1230)/(1330*110)
log((120*1230)/(1330*110))
(300 *520)/(250*100)
log(6.24)
1/120+1/1330+1/110+1/1230
1/22+1/253+1/10+1/305
1/120+1/1330+1/110+1/1230
1/300+1/250+1/100+1/520
lnORmen <- log((120*1230)/(1330*110))
lnORmen
lnORwomen <- log((300*520)/(250*100))
lnORwomen
lnORmh <- log(2.523367)
lnORmh
lnORmh <- 0.925594
lnORmh
varlnORmen <- 1/120 + 1/1330 + 1/110 +1/1230
varlnORmen
varlnORwomen <- 1/300+1/250+1/100+1/520
varlnORwomen
(((lnORmen-lnORmh)^2)/varlnORmen) - (((lnORwomen-lnORmh)^2)/varlnORwomen)
? pchisq()
pchisq(1.689359, df=1, lower.tail = FALSE, log.p = FALSE)
pchisq(1.689359, df=1, lower.tail = TRUE, log.p = FALSE)
pchisq(1.689359, df=1, lower.tail = FALSE)
(((lnORmen-lnORmh)^2)/varlnORmen) - (((lnORwomen-lnORmh)^2)/varlnORwomen)
(((lnORmen-lnORmh)^2)/varlnORmen) + (((lnORwomen-lnORmh)^2)/varlnORwomen)
pchisq(86.82715, df=1, lower.tail = FALSE)
((120*1230/2790)+(300*520/1170))/((1330*110/2790)+(250*100/1170))
ln(2.523367)
log(2.523367)
log((120*1230/2790)+(300*520/1170))/((1330*110/2790)+(250*100/1170))
((120*1230/2790)+(300*520/1170))/((1330*110/2790)+(250*100/1170))
log(2.523367)
log(((120*1230/2790)+(300*520/1170))/((1330*110/2790)+(250*100/1170)))
(20+40)/(20+10)
exp(0.068)
975-390
525-30
585+30
390+495
585/615
495/885
(120*1230)/(110*1330)
exp(0.314)
(420*1750)/(1580*210)
(120*1230)/(1330*120)
(120*1230)/(1330*110)
ORmen = 1.009
(300*520)/(250*100)
ORwomen = 6.240
((120*1230/2790)+(300*520/1170))/((1330*110/2790)+(250*100/1170))
ORmh = 2.523
log(ORmh)
lnORmh <- 0.925
log(ORmen)
log(ORwomen)
lnORmen <- log(ORmen)
lnORwomen <- log(ORwomen)
varlnORmen =  1/120 + 1/1330 + 1/110 +1/1230
varlnORwomen = 1/300+1/250+1/100+1/520
varlnORmen
varlnORwomen
((lnORmen-lnORmh)^2+(lnORwomen-lnORmh)^2)/(varlnORmen+varlnORwomen)
((lnORmen-lnORmh)^2/varlnORmen)+((lnORwomen-lnORmh)^2)/varlnORwomen))
((lnORmen-lnORmh)^2/varlnORmen)+((lnORwomen-lnORmh)^2)/varlnORwomen)
((lnORmen-lnORmh)^2/varlnORmen)+(lnORwomen-lnORmh)^2)/varlnORwomen)
((lnORmen-lnORmh)^2/varlnORmen)+((lnORwomen-lnORmh)^2)/varlnORwomen)
((lnORmen-lnORmh)^2/varlnORmen)+(lnORwomen-lnORmh)^2)/varlnORwomen))
((lnORmen-lnORmh)^2/varlnORmen)+(lnORwomen-lnORmh)^2/varlnORwomen))
((lnORmen-lnORmh)^2/varlnORmen)+(lnORwomen-lnORmh)^2/varlnORwomen)
((lnORmen-lnORmh)^2/varlnORmen)+(lnORwomen-lnORmh)^2/varlnORwomen))
((lnORmen-lnORmh)^2/varlnORmen)+(lnORwomen-lnORmh)^2/varlnORwomen)
((lnORmen-lnORmh)^2/varlnORmen)
((lnORmen-lnORmh)^2/varlnORmen)+((lnORwomen-lnORmh)^2/varlnORwomen)
varlnORmen <- 0.019
varlnORwomen
varlnORwomen <- 0.019
((lnORmen-lnORmh)^2/varlnORmen)+((lnORwomen-lnORmh)^2/varlnORwomen)
((0.009 - 0.925)^2/0.019) + ((1.831 - 0.925)^2/0.019)
(45*24)/(34*13)
15/5
15/4
15/34
(45/(45+13)) / (34/(34+24))
x <- log(1+3)/2
exp(x)
x <- (log(1)+log(3))/2
exp(x)
x <- (log(.5)+log(2))/2
exp(x)
3.33/1.07
3.67/1.18
3.49/1.18
1/120 + 1/1330 + 1/110 + 1/1230
varln(ORmen) = 1/120 + 1/1330 + 1/110 +1/1230
var(ln(ORwomen)) = 1/300+1/250+1/100+1/520 = 0.019
ORmen =  (120*1230)/(1330*110)
ORwomen = (300 *520)/(250*100)
lnORmen = ln(ORmen)
lnORmen = log(ORmen)
lnORwomen = log(ORwomen)
varlnORmen = 1/120 + 1/1330 + 1/110 +1/1230
varlnORwomen = 1/300+1/250+1/100+1/520
ORmh = ((120*1230/2790)+(300*520/1170))/((1330*110/2790)+(250*100/1170))
lnORmh  = log(ORmh)
((lnORmen - lnORmh^)2/varlnORmen) + ((lnORwomen - lnORmh)^2/varlnORwomen)
((lnORmen - lnORmh)^2/varlnORmen) + ((lnORwomen - lnORmh)^2/varlnORwomen)
ORwomen = 3
((lnORmen - lnORmh)^2/varlnORmen) + ((lnORwomen - lnORmh)^2/varlnORwomen)
ORwomen
lnORwomen = log(ORwomen)
((lnORmen - lnORmh)^2/varlnORmen) + ((lnORwomen - lnORmh)^2/varlnORwomen)
ORwomen = .630
lnORwomen = log(ORwomen)
((lnORmen - lnORmh)^2/varlnORmen) + ((lnORwomen - lnORmh)^2/varlnORwomen)
expit(-2-1*0-1*0)
exp(-2-1*0-1*0)
exp(-2)
log0.1353353
ln(0.1353353)
log(0.1353353)
log(.05)
exp(-3)
log(.5)
log(2)
exp(-1)
exp(-3)
exp(.69)
log(4)
exp(1.39)
34106.50-14536.50
4597.99+4616.94-2388.45
6550+440
440+2600+1620
4660-3822
4660-4030
4020-3822
838-208-.5(237)
838-208-.5*(237)
838-208-237
838-208-347
838 - 347 - 208
6500+440-6593
6500+440-347
440+2600+1620-347
3822+208
4313-4030
838-347-208
44-27
59-45
82-60
32.80+4.99+54.79+855+27.28+25+300+19.64+11+881.49+152.98+8.20+24.09+15.28+17.43-17.47-24.09+283
install.packages("janitor")
install.packages("knitr")
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = F, eval=F, warning = FALSE, message = FALSE, global.par=TRUE)
knitr::opts_knit$set(root.dir="~/Documents/GitHub/lizzyandshelley/Dataset")
```
Open packages.
```{r}
library(here)
library(foreign)
library(labelled)
library(dplyr)
library(reshape2)
library(lme4)
library(MASS)
library(mice)
library(biostat3)
library(lmtest)
library(gee)
library(ciTools)
```
Open working directory and load/label the data.
```{r}
#set working directory
setwd("~/Documents/GitHub/lizzyandshelley/Dataset") #LIZZY
#load the data
df <- read.spss("CTCAllWaves.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
#get variable labels
attr(df, "variable.labels")
df.labels <- as.data.frame(attr(df, "variable.labels"))
QDSlabels <- data.frame(rownames(df.labels))
df.labels <- cbind(QDSlabels, df.labels)
names(df.labels) <- c("VAR_ID", "description")
rm(QDSlabels)
#USE THIS CODE TO LOOK UP A VARIABLE DESCRIPTION
#df.labels$description[df.labels$VAR_ID=="GENDER"]
```
Subsetting the analytic sample to people with greater than 0 injections and greater than never injecting with others.
```{r}
#df.labels$description[df.labels$VAR_ID=="SUMINJ"]
#df.labels$description[df.labels$VAR_ID=="IJWOTH"]
#total number of injections last 30 days
df$SUMINJ <- as.numeric(as.character(df$SUMINJ))
table(df$SUMINJ, useNA = "ifany")
#frequency of injecting with others in last 6 months
table(df$IJWOTH, useNA = "ifany")
#convert to 3 level variable (0 = never, 1 = occasionally/sometimes, 2 = usually/always)
df$IJWOTH_3cat <- as.factor(ifelse(df$IJWOTH=="Never (0% of the time)", 0, ifelse(df$IJWOTH=="Occasionally (less than 25% of the time)" | df$IJWOTH=="Sometimes (25% to 74% of the time)", 1, ifelse(df$IJWOTH=="Usually (75% to 99% of the time)" | df$IJWOTH=="Always (100% of the time)", 2, NA))))
class(df$IJWOTH_3cat)
df$IJWOTH_3cat <- as.numeric(as.character(df$IJWOTH_3cat))
table(df$IJWOTH_3cat, useNA = "ifany")
#Subsetting the analytic sample to people with greater than 0 injections and greater than never injecting with others.
df <- subset(df, SUMINJ>0) #sample from 984 to 979
df <- subset(df, IJWOTH_3cat>0) #sample from 979 to 879
```
Create public injection variable (exposure).
```{r}
#public injection
table(df$PUBINJ, useNA = "ifany") #Frequency of public injection (ordinal)
#convert to 3 level variable (0 = never, 1 = occasionally/sometimes, 2 = usually/always)
df$PUBINJ_3cat <- as.factor(ifelse(df$PUBINJ=="Never (0% of the time)", 0, ifelse(df$PUBINJ=="Occasionally (less than 25% of the time)" | df$PUBINJ=="Sometimes (25% to 74% of the time)", 1, ifelse(df$PUBINJ=="Usually (75% to 99% of the time)" | df$PUBINJ=="Always (100% of the time)", 2, NA))))
table(df$PUBINJ_3cat, useNA = "ifany")
class(df$PUBINJ_3cat)
```
Create syringe sharing variable (outcome).
```{r}
table(df$RECSHR, useNA = "ifany") #Times used dirty needles last 6 months
df$RECSHR <- as.numeric(as.character(df$RECSHR))
```
Create covariates and substance use indicators.
```{r}
#age at baseline (years)
df$AGE <- as.numeric(as.character(df$AGE))
table(df$AGE, useNA = "ifany")
#gender
table(df$GENDER, useNA = "ifany")
#homelessness
table(df$HOMELESS) #do you consider yourself homeless
df$MOSHOME <- as.numeric(as.character(df$MOSHOME)) #number of months homeless
df$YRSHOME <- df$MOSHOME/12
table(df$HOMELESS, useNA = "ifany")
table(df$MOSHOME, useNA = "ifany")
table(df$YRSHOME, useNA = "ifany")
#crack injection
table(df$CRKINJ, useNA = "ifany")
#powder cocaine injection
table(df$CCINJ, useNA = "ifany")
#meth injection
table(df$MTINJ, useNA = "ifany")
#prescription stimulant injection
table(df$STINJ, useNA = "ifany")
#heroin injection
table(df$HRINJ, useNA = "ifany")
#NMPO injection
table(df$OPINJ, useNA = "ifany")
#alcohol
df$ALCDAY <- as.numeric(as.character(df$ALCDAY)) #Days of alcohol use in last 30 days
df$ALCTX <- as.numeric(as.character(df$ALCTX)) #Times you drank on a typical day
df$binge <- ifelse(df$ALCDAY==0, 0, ifelse(df$ALCTX<4, 0, ifelse(df$ALCTX>3, 1, NA))) #binge alcohol on a typical day (>3 drinks)
table(df$ALCDAY, useNA = "ifany")
table(df$ALCTX, useNA = "ifany")
table(df$binge, useNA = "ifany")
#any stimulant injection (composite)
df$ANYSTIM <- ifelse(df$CRKINJ=="Yes" | df$CCINJ=="Yes" | df$MTINJ=="Yes" | df$STINJ=="Yes", 1, ifelse(df$CRKINJ=="No" & df$CCINJ=="No" & df$MTINJ=="No" & df$STINJ=="No", 0, NA))
table(df$ANYSTIM, useNA = "ifany")
#any opioid injection (composite)
df$ANYOPIATE <- ifelse(df$HRINJ=="Yes" | df$OPINJ=="Yes", 1, ifelse(df$HRINJ=="No" & df$OPINJ=="No", 0, NA))
table(df$ANYOPIATE, useNA = "ifany")
```
