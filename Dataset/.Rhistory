setwd("~/Desktop/lizzyandshelley")
#set working directory
setwd("~/Desktop/lizzyandshelley") #LIZZY
#open packages
library(here)
library(foreign)
library(labelled)
#load the data
df <- read.spss("Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
#load the data
df <- read.spss("Dataset", "Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
#load the data
df <- read.spss(Dataset, "Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
setwd("~/Desktop/lizzyandshelley/Dataset")
#load the data
df <- read.spss("~/Desktop/lizzyandshelley/Dataset/"Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
#set working directory
setwd("~/Desktop/lizzyandshelley/Dataset") #LIZZY
#load the data
df <- read.spss("Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
#set working directory
setwd("~/Desktop/lizzyandshelley/Dataset") #LIZZY
#open packages
library(here)
library(foreign)
library(labelled)
#load the data
df <- read.spss("Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
#get variable labels
attr(df, "variable.labels")
df.labels <- as.data.frame(attr(df, "variable.labels"))
View(df.labels)
View(df.labels)
View(df.labels)
class(df.labels)
names(df.labels)
#set working directory
setwd("~/Desktop/lizzyandshelley/Dataset") #LIZZY
#open packages
library(here)
library(foreign)
library(labelled)
#load the data
df <- read.spss("Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
knitr::opts_chunk$set(echo = TRUE)
#open packages
library(here)
library(foreign)
library(labelled)
library(dplyr)
library(reshape2)
library(lme4)
library(MASS)
knitr::opts_chunk$set(echo = TRUE)
#open packages
library(here)
library(foreign)
library(labelled)
library(dplyr)
library(reshape2)
library(lme4)
library(MASS)
library(mice)
#set working directory
setwd("~/Desktop/lizzyandshelley/Dataset") #LIZZY
#load the data
df <- read.spss("Ricky.SAV", use.value.labels = TRUE, to.data.frame=TRUE)
attr(df, "variable.labels")
df.labels <- as.data.frame(attr(df, "variable.labels"))
QDSlabels <- data.frame(rownames(df.labels))
df.labels <- cbind(QDSlabels, df.labels)
names(df.labels) <- c("VAR_ID", "description")
rm(QDSlabels)
# #crack injection
# table(df$CRKINJ, useNA = "ifany")
df$CRKINJ1 <- ifelse(df$CRKINJ1=="No", "No", ifelse(df$CRKINJ1=="Yes", "Yes", NA))
# table(df$CRKINJ1, useNA = "ifany")
# table(df$CRKINJ2, useNA = "ifany")
#
#
# #powder cocaine injection
# table(df$CCINJ, useNA = "ifany")
df$CCINJ1 <- ifelse(df$CCINJ1=="No", "No", ifelse(df$CCINJ1=="Yes", "Yes", NA))
# table(df$CCINJ1, useNA = "ifany")
# table(df$CCINJ2, useNA = "ifany")
#
#
# #meth injection
# table(df$MTINJ, useNA = "ifany")
df$MTINJ1 <- ifelse(df$MTINJ1=="No", "No", ifelse(df$MTINJ1=="Yes", "Yes", NA))
# table(df$MTINJ1, useNA = "ifany")
# table(df$MTINJ2, useNA = "ifany")
#
#injection of prescription stimulants
#table(df$STINJ, useNA = "ifany")
df$STINJ1 <- ifelse(df$STINJ1=="No", "No", ifelse(df$STINJ1=="Yes", "Yes", NA))
#table(df$STINJ1, useNA = "ifany")
#table(df$STINJ2, useNA = "ifany")
# #heroin injection
# table(df$HRINJ, useNA = "ifany")
df$HRINJ1 <- ifelse(df$HRINJ1=="No", "No", ifelse(df$HRINJ1=="Yes", "Yes", NA))
# table(df$HRINJ1, useNA = "ifany")
# table(df$HRINJ2, useNA = "ifany")
#NMPO injection
table(df$OPINJ, useNA = "ifany")
df$OPINJ1 <- ifelse(df$OPINJ1=="No", "No", ifelse(df$OPINJ1=="Yes", "Yes", NA))
table(df$OPINJ1, useNA = "ifany")
table(df$OPINJ2, useNA = "ifany")
#
# #alcohol
df$ALCDAY <- as.numeric(df$ALCDAY)
df$ALCDAY1 <- as.numeric(df$ALCDAY1)
df$ALCDAY2 <- as.numeric(df$ALCDAY2)
df$ALCTX <- as.numeric(df$ALCTX)
df$ALCTX1 <- as.numeric(df$ALCTX1)
df$ALCTX2 <- as.numeric(df$ALCTX2)
#binge alcohol on a typical day
#binge baseline
df$binge <- ifelse(df$ALCDAY==0, 0, ifelse(df$ALCTX<4, 0, ifelse(df$ALCTX>3, 1, NA)))
#binge FU1
df$binge1 <- ifelse(df$ALCDAY1==0, 0, ifelse(df$ALCTX1<4, 0, ifelse(df$ALCTX1>3, 1, NA)))
#binge FU2
df$binge2 <- ifelse(df$ALCDAY2==0, 0, ifelse(df$ALCTX2<4, 0, ifelse(df$ALCTX2>3, 1, NA)))
#any stimulant injection
#any stimulant injection baseline
df$ANYSTIM <- ifelse(df$CRKINJ=="Yes" | df$CCINJ=="Yes" | df$MTINJ=="Yes" | df$STINJ=="Yes", 1, ifelse(df$CRKINJ=="No" & df$CCINJ=="No" & df$MTINJ=="No" & df$STINJ=="No", 0, NA))
#any stimulant injection FU1
df$ANYSTIM1 <- ifelse(df$CRKINJ1=="Yes" | df$CCINJ1=="Yes" | df$MTINJ1=="Yes" | df$STINJ1=="Yes", 1, ifelse(df$CRKINJ1=="No" & df$CCINJ1=="No" & df$MTINJ1=="No" & df$STINJ1=="No", 0, NA))
#any stimulant injection FU2
df$ANYSTIM2 <- ifelse(df$CRKINJ2=="Yes" | df$CCINJ2=="Yes" | df$MTINJ2=="Yes" | df$STINJ2=="Yes", 1, ifelse(df$CRKINJ2=="No" & df$CCINJ2=="No" & df$MTINJ2=="No" & df$STINJ2=="No", 0, NA))
table(df$ANYSTIM)
table(df$ANYSTIM, useNA = "ifany")
table(df$ANYSTIM1, useNA = "ifany")
table(df$ANYSTIM2, useNA = "ifany")
#any opioid injection
df$ANYOPIATE <- ifelse(df$HRINJ=="Yes" | df$OPINJ=="Yes", 1, ifelse(df$HRINJ=="No" & df$OPINJ=="No", 0, NA))
df$ANYOPIATE1 <- ifelse(df$HRINJ1=="Yes" | df$OPINJ1=="Yes", 1, ifelse(df$HRINJ1=="No" & df$OPIN1J1=="No", 0, NA))
df$ANYOPIATE2 <- ifelse(df$HRINJ2=="Yes" | df$OPINJ2=="Yes", 1, ifelse(df$HRINJ2=="No" & df$OPINJ2=="No", 0, NA))
table(df$ANYOPIATE, useNA = "ifany")
table(df$ANYOPIATE1, useNA = "ifany")
table(df$ANYOPIATE2, useNA = "ifany")
#any opioid injection
df$ANYOPIATE <- ifelse(df$HRINJ=="Yes" | df$OPINJ=="Yes", 1, ifelse(df$HRINJ=="No" & df$OPINJ=="No", 0, NA))
df$ANYOPIATE1 <- ifelse(df$HRINJ1=="Yes" | df$OPINJ1=="Yes", 1, ifelse(df$HRINJ1=="No" & df$OPINJ1=="No", 0, NA))
df$ANYOPIATE2 <- ifelse(df$HRINJ2=="Yes" | df$OPINJ2=="Yes", 1, ifelse(df$HRINJ2=="No" & df$OPINJ2=="No", 0, NA))
table(df$ANYOPIATE1, useNA = "ifany")
